@page "/account/register"
@inject NavigationManager Navigation

<PageTitle>Register</PageTitle>

<MudText Typo="Typo.h4" GutterBottom="true">Create an Account</MudText>
<MudText Typo="Typo.body1" Class="mb-4">Register to track your service requests and manage your profile.</MudText>

@if (!string.IsNullOrEmpty(_errorMessage))
{
    <MudAlert Severity="Severity.Error" Class="mb-4">@_errorMessage</MudAlert>
}

<MudPaper Class="pa-4" MaxWidth="500px" Elevation="1">
    <form method="post" action="/api/account/register" data-enhance="false">
        <MudText Typo="Typo.h6" GutterBottom="true">Account Credentials</MudText>
        <div class="form-group mb-3">
            <label for="email" class="d-block mb-1"><b>Email</b></label>
            <input id="email" type="email" name="email" class="form-control" required />
        </div>
        <div class="form-group mb-3">
            <label for="password" class="d-block mb-1"><b>Password</b></label>
            <input id="password" type="password" name="password" class="form-control" required />
        </div>
        <div class="form-group mb-4">
            <label for="confirmPassword" class="d-block mb-1"><b>Confirm Password</b></label>
            <input id="confirmPassword" type="password" name="confirmPassword" class="form-control" required />
        </div>

        <MudText Typo="Typo.h6" GutterBottom="true">Contact Information</MudText>
        <div class="form-group mb-3">
            <label for="name" class="d-block mb-1"><b>Full Name</b></label>
            <input id="name" type="text" name="name" class="form-control" required />
        </div>
        <div class="form-group mb-4">
            <label for="phone" class="d-block mb-1"><b>Phone</b></label>
            <input id="phone" type="tel" name="phone" class="form-control" required />
        </div>

        <button type="submit" class="btn btn-primary">Register</button>
        <MudText Class="mt-3">Already have an account? <MudLink Href="/account/login">Login</MudLink></MudText>
    </form>
</MudPaper>

@code {
    private string? _errorMessage;

    protected override void OnInitialized()
    {
        var uri = new Uri(Navigation.Uri);
        var query = System.Web.HttpUtility.ParseQueryString(uri.Query);
        _errorMessage = query["error"];
    }
}
